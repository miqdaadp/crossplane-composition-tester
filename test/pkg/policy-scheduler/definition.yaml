apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xpolicyschedulers.policyscheduler.example.com  # Fixed name format
spec:
  group: policyscheduler.example.com  # Custom API group
  names:
    kind: XPolicyScheduler
    plural: xpolicyschedulers
    singular: xpolicyscheduler  # Optional: Add singular name for consistency
  scope: Namespaced  # Can be Namespaced or Cluster depending on your use case
  enforcedCompositionRef:
    name: xpolicyscheduler.aws.policyscheduler.example.com  # Correct the name
  versions:
    - name: v1alpha1
      served: true
      referenceable: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                schedules:
                  type: array
                  description: "List of schedules"
                  items:
                    type: object
                    description: "Schedule of policy assignment to role"
                    properties:
                      roleName:
                        type: string
                        description: "IAM role to provision and attach policy to"
                      policyArn:
                        type: string
                        description: "Policy ARN to attach to the role"
                      scheduleFrom:
                        type: string
                        format: date-time  # Ensure correct format for time
                        description: "Start time  (e.g., 2023-01-01T00:00:00Z)"
                      scheduleUntil:
                        type: string
                        format: date-time  # Ensure correct format for time
                        description: "End time (e.g.,2023-12-31T23:59:59Z)"
