apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xpolicyschedulers.policyscheduler.example.com
spec:
  group: policyscheduler.example.com
  names:
    kind: XPolicyScheduler
    plural: xpolicyschedulers
  claimNames:
    kind: PolicyScheduler
    plural: policyscheduler
  enforcedCompositionRef:
    name: xpolicyscheduler.aws.example.com
  versions:
    - name: v1alpha1
      served: true
      referenceable: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                schedules:
                  type: array
                  description: list of schedules
                  items:
                    type: object
                    description: Description of the schedule of the policy assignment to the role. The role must be provisioned and must have the policy assigned ONLY during the time interval (from->until)
                    properties:
                      roleName:
                        type: string
                        description: The role to provision and attach the policy to
                      policyArn:
                        type: string
                        description: The policy ARN to attach to the role
                      scheduleFrom:
                        type: string
                        format: date-time
                        description: The timestamp when the policy should be attached to the role (ISO 8601 format, e.g., 2025-03-13T07:35:05Z)
                      scheduleUntil:
                        type: string
                        format: date-time
                        description:  The timestamp when the policy should be detached from the role (ISO 8601 format, e.g., 2025-03-15T07:35:05Z)